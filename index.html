<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport"
      content="width=device-width, initial-scale=1.0, viewport-fit=cover, maximum-scale=1">
<title>Deine Wahl</title>

<style>
/* GLOBAL */
* { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
html, body { margin: 0; padding: 0; height: 100%; }

body {
    font-family: -apple-system, BlinkMacSystemFont, "Helvetica Neue", Arial;
    background:
        radial-gradient(circle at 10% 20%, rgba(65,150,255,0.9), transparent 50%),
        radial-gradient(circle at 80% 10%, rgba(255,110,200,0.9), transparent 50%),
        radial-gradient(circle at 50% 80%, rgba(140,90,255,0.9), transparent 50%),
        linear-gradient(135deg, #4F8BFF, #8D5AFB 50%, #FF5BC4);

    background-blend-mode: overlay, screen, normal;
    overflow-x: hidden;

    /* FIX: space so footer doesn't cover the last options */
    padding-bottom: calc(260px + env(safe-area-inset-bottom));
}


/* HEADER */
.header {
    text-align: center;
    padding: 40px 20px 10px;
    color: #000;
}

.logo {
    width: clamp(120px, 22vw, 200px);
    height: auto;
    margin: 0 auto 20px;
    display: block;
    object-fit: contain;
}

.title {
    font-size: clamp(30px, 6vw, 48px);
    font-weight: 800;
}

.subtitle {
    font-size: clamp(20px, 4vw, 30px);
    font-weight: 700;
}

/* ROWS */
.row-wrapper {
    margin: 35px 22px;
    border-radius: 24px;
    padding: 20px;
    transition: 0.25s ease;
}

/* ALWAYS 4 COLUMNS */
.row-images {
    display: grid;
    grid-template-columns: repeat(4, 1fr) !important;
    gap: 12px;
}

/* IMAGE STYLE */
.row-images img {
    width: 100%;
    border-radius: 18px;
    display: block;
    object-fit: cover;
}

/* SELECTED ROW */
.row-wrapper.selected {
    outline: 6px solid #fff;
    box-shadow:
        0 0 25px rgba(255,255,255,0.9),
        0 0 45px rgba(255,120,255,0.7),
        0 0 70px rgba(120,180,255,0.5);
    transform: scale(1.03);
}

/* FOOTER */
.footer {
    position: fixed;
    bottom: 0;
    width: 100%;
    backdrop-filter: blur(20px);
    background: rgba(255,255,255,0.55);
    padding: 10px 22px; /* reduced height */
    display: flex;
    justify-content: space-between;
    align-items: center;

    height: 70px; /* fixed compact height */
    
    font-weight: 700;
    font-size: clamp(15px, 2.5vw, 20px);
    color: #000;

    /* safe-area support for iPhones */
    padding-bottom: env(safe-area-inset-bottom);
}


#weiterBtn {
    padding: 10px 26px;
    border: none;
    border-radius: 16px;
    background: #d3d3d3;
    color: #666;
    font-size: clamp(15px, 2vw, 18px);
    transition: 0.25s ease;
}


#weiterBtn.active {
    background: #00D26A;
    color: white;
    box-shadow: 0 4px 20px rgba(0,200,110,0.4);
    cursor: pointer;
}

/* THANK YOU SCREEN */
#thankyou {
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    display: none;
    background: linear-gradient(135deg, #5AB0FF, #D168FF);
    justify-content: center;
    align-items: center;
    flex-direction: column;
    color: black;
    font-weight: 900;
    font-size: clamp(40px, 8vw, 70px);
    text-align: center;
}

</style>
</head>

<body>

<!-- HEADER -->
<div class="header">
    <img src="img/jabjab logo.png" class="logo">
    <div class="title">Deine Wahl, Dein Stil</div>
    <div class="subtitle">Wähle 3 Lieblingsbälle</div>
    <div class="subtitle" style="font-size: 22px;">Klicke auf die 3 Bälle</div>
</div>

<!-- GRID CONTAINER -->
<div id="rowsContainer"></div>

<!-- FOOTER -->
<div class="footer">
    <div><span id="count">0</span> / 3 ausgewählt</div>
    <button id="weiterBtn">Weiter</button>
</div>

<!-- FINAL SCREEN -->
<div id="thankyou">
    <img src="img/jabjab logo.png" style="width:160px; margin-bottom:20px;">
    Danke! ✔<br>
    <div style="font-size:28px; margin-top:10px; font-weight:700;">Neuer Kunde in 3 Sekunden…</div>
</div>

<script>
/* GOOGLE FORM */
const formURL =
 "https://docs.google.com/forms/d/1fRd6PAI_IcwVgsTk2PZ0iH5CYzMiSQ6bqm7Rlod4rSU/formResponse";
const entryID = "entry.875728941";

/* GRADIENT COLORS */
const gradients = [
    "linear-gradient(90deg, #ff7eb3, #ff65a3)",
    "linear-gradient(90deg, #56e1ff, #38b6ff)",
    "linear-gradient(90deg, #7df77d, #0ed675)",
    "linear-gradient(90deg, #ffa96c, #ff766c)",
    "linear-gradient(90deg, #c18bff, #a55bff)",
    "linear-gradient(90deg, #6fe7ff, #008cff)",
    "linear-gradient(90deg, #ffd86f, #ffac33)",
    "linear-gradient(90deg, #ff6fd8, #c846ff)"
];

let selectedRows = [];
const container = document.getElementById("rowsContainer");

/* BUILD ROWS */
for (let i = 0; i < 8; i++) {
    const wrapper = document.createElement("div");
    wrapper.className = "row-wrapper";
    wrapper.style.background = gradients[i];
    wrapper.dataset.row = "Ball" + (i + 1);

    const imgs = document.createElement("div");
    imgs.className = "row-images";

    const angles = ["front", "back", "left", "right"];

    angles.forEach(a => {
        const img = document.createElement("img");
        img.src = `img/ball${i + 1}-${a}.jpg`;
        imgs.appendChild(img);
    });

    wrapper.appendChild(imgs);

    wrapper.addEventListener("click", () => {
        const val = wrapper.dataset.row;

        if (wrapper.classList.contains("selected")) {
            wrapper.classList.remove("selected");
            selectedRows = selectedRows.filter(x => x !== val);
        } else if (selectedRows.length < 3) {
            wrapper.classList.add("selected");
            selectedRows.push(val);
        }

        updateUI();
    });

    container.appendChild(wrapper);
}

/* UPDATE UI */
function updateUI() {
    document.getElementById("count").innerText = selectedRows.length;
    const btn = document.getElementById("weiterBtn");
    if (selectedRows.length === 3) btn.classList.add("active");
    else btn.classList.remove("active");
}

/* SEND DATA + SHOW FINAL SCREEN */
document.getElementById("weiterBtn").addEventListener("click", () => {
    if (selectedRows.length !== 3) return;

    const fd = new FormData();
    fd.append(entryID, selectedRows.join(", "));
    fetch(formURL, { method: "POST", mode: "no-cors", body: fd });

    document.getElementById("thankyou").style.display = "flex";
    setTimeout(() => location.reload(), 3000);
});
</script>

</body>
</html>
